<app-pagetiltle
  title="HOME"
  [breadcrumbItems]="breadCrumbItems"
></app-pagetiltle>
<div style="background-color: #121a36">
  <div
    class="background-image"
    style="
      max-width: 1218px;
      min-height: 100vh;
      margin: auto;
      padding: 10px;
      display: flex;
    "
  >
    <div class="left">
      <div class="create-post" *ngIf="loggedInUser != null">
        <div style="display: flex; justify-content: space-between">
          <div class="create-details">
            <div
              class="detials1"
              style="
                width: 40px;
                height: 40px;
                background-color: #ddd;
                border-radius: 10%;
              "
            >
              <img
                style="border-radius: 10%"
                src="https://marketplace.canva.com/EAFEits4-uw/1/0/1600w/canva-boy-cartoon-gamer-animated-twitch-profile-photo-oEqs2yqaL8s.jpg "
              />
            </div>
            <div>
              <h3 style="color: #eee">
                {{ currentUser.first_name }} {{ currentUser.last_name }}
              </h3>
            </div>
          </div>
          <i
            data-bs-toggle="collapse"
            data-bs-target="#collapsiblecreatepost"
            class="fa fa-plus-square-o"
            aria-hidden="true"
            style="padding-top: 6px; font-size: 25px; color: #ddd"
          ></i>

          <!-- <button  style="float: right;"  data-bs-toggle="collapse"  data-bs-target="#collapsiblecreatepost">Create post</button> -->
        </div>
        <div class="post collapse" id="collapsiblecreatepost">
          <div class="create_post">
            <form
              style="display: flex; flex-direction: column"
              (ngSubmit)="onforumSubmit(forumForm)"
              #forumForm="ngForm"
            >
              <textarea
                class="textarea bg-light"
                id="description"
                name="description"
                ngModel
                required
                style="width: 100%"
              ></textarea>
              <div style="display: flex; justify-content: flex-end">
                <button type="submit">Post</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="announcement1 bg-light" *ngFor="let item of posts">
        <div class="comment">
          <div
            class="details"
            style="display: flex; justify-content: space-between"
          >
            <div style="display: flex">
              <div
                class="detials1"
                style="
                  width: 40px;
                  height: 40px;
                  background-color: #ddd;
                  border-radius: 10%;
                "
              >
                <img
                  style="border-radius: 10%"
                  src="https://marketplace.canva.com/EAFEits4-uw/1/0/1600w/canva-boy-cartoon-gamer-animated-twitch-profile-photo-oEqs2yqaL8s.jpg "
                />
              </div>
              <div style="display: flex; justify-content: space-between">
                <div class="details2">
                  <h4>
                    {{ item.user.first_name }} &nbsp; {{ item.user.last_name }}
                  </h4>
                  <p style="color: #aaa">
                    {{ item.user.occupation }} |
                    {{ item.created_at | lastSeen }}
                  </p>
                </div>
              </div>
            </div>
            <div
              class="icon-container"
              (mouseenter)="showDropdown = true"
              (mouseleave)="showDropdown = false"
            >
              <i
                class="fa fa-pencil-square-o"
                aria-hidden="true"
                style="padding: 5px; cursor: pointer; float: right"
              ></i>
              <div class="dropdown" *ngIf="showDropdown">
                <ul>
                  <li><a (click)="editItem(item.id)">Edit</a></li>
                  <li><a (click)="onDeletePost(item.id)">Delete</a></li>
                </ul>
              </div>
            </div>
            <!-- <i class="fa fa-pencil-square-o" aria-hidden="true"style="padding: 5px;cursor: pointer;float:right"></i> -->
          </div>
          <div class="comment-content">
            <p (click)="viewPost(item)">{{ item.content }}</p>
          </div>
          <div class="reactions">
            <hr />
            <ul
              class="reaction"
              style="display: flex; justify-content: space-between"
            >
              <div>
                <!-- <i class="fa fa-eye" aria-hidden="true"></i> -->
              </div>
              <!-- <div style="display: flex;">
                <li><span>{{ item.likes}}</span> like</li><span style="color: #aaa;">|</span>
                <li><span>{{ item.unlikes }}</span>unlike</li> <span style="color: #aaa;">|</span>
                <li><span>{{ item.comments.length }}</span>
                  <a style="text-decoration: none;" (click)="viewPost(item)" [class.active]="item.showComments"><i class="fa fa-commenting" aria-hidden="true"></i> comments</a>
                </li>
              </div> -->
              <div style="display: flex">
                <li [ngClass]="{ liked: item.liked }">
                  <i
                    class="fa fa-thumbs-up"
                    aria-hidden="true"
                    (click)="onlikePost(item.id)"
                  ></i>
                  <span>{{ item.likes }}</span> Like
                </li>

                <!-- <span style="color: #aaa">|</span> -->
                <!-- <li>
                  <i class="fa fa-thumbs-down" aria-hidden="true"></i>
                  <span>{{ item.unlikes }}</span
                  >Unlike
                </li>
                <span style="color: #aaa">|</span> -->
                <li>
                  <span>{{ item.comments.length }}</span>
                  <a
                    style="text-decoration: none"
                    [class.active]="item.showComments"
                    ><i class="fa fa-commenting" aria-hidden="true"></i>
                    Comments</a
                  >
                </li>
              </div>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <div class="right" style="padding-left: 15px">
      <div class="announcement1 bg-light" *ngFor="let item of announcements">
        <div class="comment">
          <div
            class="details"
            style="display: flex; justify-content: space-between"
          >
            <div style="margin: auto">
              <div
                class="detials1"
                style="
                  width: 120px;
                  height: 100px;
                  background-color: #ddd;
                  border-radius: 10%;
                  text-align: center;
                  margin: auto;
                "
              >
                <img
                  style="border-radius: 5%"
                  src="https://marketplace.canva.com/EAFEits4-uw/1/0/1600w/canva-boy-cartoon-gamer-animated-twitch-profile-photo-oEqs2yqaL8s.jpg "
                />
              </div>
              <div style="display: flex; justify-content: space-between">
                <div class="details2" style="text-align: center">
                  <h4 style="text-align: center; padding-top: 10px">
                    {{ item.title }}
                  </h4>
                </div>
              </div>
            </div>
          </div>
          <div class="comment-content">
            <p style="text-align: center" class="card-description">
              {{ item.description }}
            </p>
          </div>
          <div style="text-align: center">
            <button
              onclick="navigateToViewAnnouncement(announcementId)"
              style="
                text-align: center;
                border: none;
                background-color: rgb(130, 205, 97);
                padding: 4px 10px;
                margin: auto;
                text-align: center;
                margin: 5px;
                border-radius: 2px;
              "
            >
              read more
            </button>
          </div>

          <p style="color: #aaa; text-align: center">
            {{ item.user.occupation }} | {{ item.datecreated | lastSeen }}
          </p>
        </div>
      </div>
    </div>
    <!-- --------------------------------------------------------------------------------------------------------------- -->
  </div>
</div>
